---
title: "HW4 MD CityCrime"
---

In this assignment, we will be working with a dataset of total crimes reported by Maryland cities for two consecutive years. You'll load the data, calculate the violent and property crime rates for each city for both years, and then calculate the percentage change in the crime rates between the two years. You'll also write a short story based on your findings.

### Task 1: Load the Tidyverse and Janitor

You will need to load the tidyverse library and the janitor library

```{r}
library(tidyverse)
library(janitor)
```

Then you'll load the data from the web. The URL for the data is: https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_cities_crime_2019_2020.csv. You will create a dataframe called `md_cities` that contains the data from this URL.

### Task 2: Load the Data

```{r}
md_cities <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_cities_crime_2019_2020.csv")
```
### Task 3: Calculating Rates

Calculate violent and property crime rates for each city for both years using `mutate()`. You'll create four new columns: `violent_rate_2019`, `property_rate_2019`, `violent_rate_2020`, and `property_rate_2020`. You'll need to figure out the proper unit rate, given that there are varying populations. There's no perfect choice; choose the one that works best for you. Save the results to a new dataframe called `md_cities_rates`.

```{r}
md_cities_rates <- md_cities |>
  mutate(
    violent_rate_2019 = (violent2019 / pop2019) * 1000,
    property_rate_2019 = (property2019 / pop2019) * 1000,
    violent_rate_2020 = (violent2020 / pop2020) * 1000,
    property_rate_2020 = (property2020 / pop2020) * 1000
  ) %>% 
select(city,violent_rate_2019,violent_rate_2020,property_rate_2019,property_rate_2020)
```

### Task 4: Describe the Rates

Examine the new dataframe, `md_cities_rates`, by clicking on it in the Environment tab in RStudio and sorting by the rate columns. Write a couple of sentences about the results, comparing and contrasting the cities with the highest rates (both violent and property) in 2019 and 2020. Do you see any patterns? What does this tell you about crime in Maryland cities? What's the story here?


Maryland's rate of crime in either property or violent crimes is topped by Ocean City. It seems like this vacation town along this Eastern Shore town. Baltimore, which led violent crime in 2019 at 18.3 per 1,000, actually dropped to 16.0 in 2020, a surprising reversal that defies the typical That year the city was superseded by Ocean City in the violent crime rate, surging from 13.1 to nearly 24.0 per 1,000. More smaller towns in the state The rest of the data reveals that smaller municipalities that could be economically struggling towns like Cambridge, Elkton, and Salisbury—often face crime rates that rival or exceed those of Maryland's largest city. I think joining this with more census data could help drive a story about how population size alone doesn't predict public safety challenges and instead should be seen through intersectional lens.  




### Task 5: Calculate Percentage Change

Let's add two percentage change columns to your dataframe: one for violent crime rates and one for property crime rates. You'll calculate the percentage change between 2019 and 2020 for each city. Save the results to a new dataframe called `md_cities_change`.

```{r}
md_cities_change <- md_cities_rates |>
  mutate(
    violent_pct_change = ((violent_rate_2020 - violent_rate_2019) / violent_rate_2019) * 100,
    property_pct_change = ((property_rate_2020 - property_rate_2019) / property_rate_2019) * 100
  )
```

### Task 7: Describe Percentage Changes

Look at the `md_cities_change` dataframe by clicking on it in the Environment tab in RStudio. Write a couple of sentences describing the percentage change results. What's more interesting here, the patterns or the outliers? What's the story in the data?

The percentage swings in towns noted earlier for the small population sizes, like for example Edmonston, was the most compelling result. The town is geographically closer to the District of Columbia than the rest of Maryland and saw violent crime spike 895%. Again, Ocean City showed up on the radar with a 83% surge in violent crime (from 13.1 to 24.0 per 1,000) and Baltimore's counterintuitive 12.9% decline in violent crime during 2020. This is also notably a pandemic year where in other city environments violent crimes rose, like murder, rose across th country. The percentage changes expose how crime statistics in small municipalities can be misleading: a single robbery in a town of 200 people creates a mathematical crisis on paper, while the real story lies in places like Ocean City where absolute numbers and rates both tell a consistent tale of deteriorating public safety.

### Task 8: Tell the Best Story

Write up a lede and nutgraf of a story with the best story idea you've found in this assignment. The lede should be a single sentence that summarizes the most important information in the data. The nutgraf should be a paragraph that provides more context and explains why the data is important.

Lede: A dramatic shift in Maryland’s crime landscape occurred in 2020, as Ocean City overtook Baltimore for the state's highest violent crime rate following an 83% spike in offenses.

Nutgraf: According to state data, the town’s violent crime rate climbed from 13.1 to 24.0 incidents per 1,000 residents last year, while property crime rates hit 121 per 1,000—more than double that of any other Maryland municipality. The figures upends previous notions that urban centers bear the state's heaviest public safety burden, raising questions about how seasonal tourism strain local law enforcement. As Baltimore implemented community policing reforms and saw violent crime decline during the pandemic, Ocean City's public safety crisis went largely unnoticed, suggesting that the state's crime policy discussions may be focused on the wrong jurisdictions. The data suggests a quiet but acute safety crisis has emerged on the coast.

### Task 9: Save Your Work and Put it on GitHub

Save this notebook, then commit it to your local repository. Push the changes to your GitHub repository and submit the URL for this file in ELMS.

### Task 10: Statistical Analysis of 2020 Violent Crime Rates

Using the 2020 violent crime rate, calculate the percentiles using `ntile()`. Save the results to a new dataframe called `md_cities_percentiles`.

```{r}
md_cities_percentiles <- md_cities_rates |>
  mutate(percentile = ntile(violent_rate_2020, 100)) |>
  arrange(desc(percentile))
```

How many cities are above the 90th percentile?

```{r}
md_cities_percentiles |>
  filter(percentile > 90)
```

Calculate the Interquartile Range of the 2020 violent crime rate using `summarize()` and R's `IQR()` function.

```{r}
md_cities_rates |>
  summarize(
    violent_rate_iqr = IQR(violent_rate_2020)
  )
```

Do the results change your best story idea from the previous assignment? Why or why not?

I think this analysis actually strengthens the original story angle rather than changing it. Ranking the violent crime rates by percentile confirms that Ocean City isn't just marginally higher—it's a genuine geographic outlier.

While ten cities fall above the 90th percentile, Ocean City’s rate of 24 per 1,000 puts it in a whole different category. It’s nearly 8 points higher than even Baltimore at 16. I created a horizontal bar chart with the help of Claude to visualize the comparison and you can see how different Ocean City is to the rest.

The Interquartile Range of 4.2 really puts that in perspective: it tells us that the middle 50% of Maryland cities cluster within a pretty narrow band. Ocean City’s gap above Baltimore is almost double that entire middle spread, which validates the thesis that the state's most acute violent crime problem has shifted from the urban center to the coast.

From here, I think the next logical step is to dig into the actual composition of that rate. I’d want to look at a more detailed spread of the charges coming out of the local law enforcement arrest data. Understanding the specific nature of those charges feels like the only way to accurately characterize what "danger" really looks like in a beach town versus a major city.


```{r}
# Top 10 cities comparison with rounded numbers
top_10 <- md_cities_rates %>%
  arrange(desc(violent_rate_2020)) %>%
  slice(1:10) %>%
  mutate(rate_rounded = round(violent_rate_2020),
         highlight = case_when(
           city == "Ocean City" ~ "Ocean City",
           city == "Baltimore" ~ "Baltimore",
           TRUE ~ "Other"
         ))

ggplot(top_10, aes(x = reorder(city, violent_rate_2020),
                   y = rate_rounded, fill = highlight)) +
  geom_col(width = 0.7, alpha = 0.9) +
  geom_text(aes(label = rate_rounded),
            hjust = -0.2, size = 4, fontface = "bold") +
  scale_fill_manual(values = c("Ocean City" = "red",
                                "Baltimore" = "darkblue",
                                "Other" = "steelblue"),
                    guide = "none") +
  coord_flip() +
  labs(title = "Top 10 Cities by Violent Crime Rate",
       subtitle = "Ocean City leads with 24 per 1,000, 8 points above Baltimore",
       x = "", y = "Violent Crime Rate (per 1,000 residents)",
       caption = "Note: Rates rounded to nearest whole number") +
  theme_minimal() +
  theme(panel.grid.major.y = element_blank(),
        axis.text.y = element_text(size = 10, face = "bold"),
        plot.caption = element_text(hjust = 0, face = "italic", size = 9)) +
  ylim(0, 26)
```
